## 简答题

#### 谈谈你是如何理解 JS 异步编程的，EventLoop、消息队列都是做什么的，什么是宏任务，什么是微任务？

**答:**



1. JS异步编程
   - JS设计初衷为实现页面动态交互，核心是DOM操作必须以单线程模式工作。
   - 但是单线程会出现耗时任务阻塞执行，为了解决这一问题，JS将任务执行模式分成同步和异步模式。
   - JS在单线程模式下利用消息队列和时间循环机制实现实现异步模式的任务执行模式。
   - 由此产生了大量异步模式API形成了一系列新语法新特性，弥补了JS在异步编程的缺陷，由此形成了大量JS异步编程方案。
2. 时间循环和消息队列
- 消息队列和事件循环是实现JS异步模式的运行机制，主要过程如下：
   - 代码按顺序执行过程中，同步代码会进入调用栈中执行，异步代码会进入异步API环境中执行。
- 异步任务执行时产生的同步代码会以先进先出的方式进入Quene消息队列等待执行。
   - EventLoop时间循环机制会不断检查当前调用栈是否为空。一旦为空将按顺序将同步代码入栈到调用栈，当中产生的异步代码会进入异步API环境中执行，直至消息队列清空。
- 周而复始，直至执行完所有代码，并释放内存空间。

3. 宏任务和微任务
   - 微任务：当前事件循环调用结束末尾执行的异步任务，如Promise，MutationObserver，process.nextTick等
   - 宏任务：下一轮事件循环执行的异步任务，大部分异步调用api都是宏任务，如setTimeout

